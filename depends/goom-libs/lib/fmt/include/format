#pragma once

#if defined(__GNUC__) and not defined(__clang__)
// Broken with gcc 13.1 and fmt 10.0.0
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Warray-bounds"
#pragma GCC diagnostic ignored "-Wstringop-overflow"
#endif

#include <stdexcept>

// NOLINTNEXTLINE(cppcoreguidelines-macro-usage)
#define FMT_HEADER_ONLY 1

class format_error : public std::runtime_error
{
public:
  explicit format_error(const std::string& __what) : std::runtime_error(__what) { }
  explicit format_error(const char* __what) : std::runtime_error(__what) { }
};

[[noreturn]] inline void __throw_format_error(const char* __what)
{ _GLIBCXX_THROW_OR_ABORT(format_error(__what)); }

// NOLINTBEGIN: third-party code
#include "fmt/format.h"
// NOLINTEND: third-party code

#if defined(__GNUC__) and not defined(__clang__)
#pragma GCC diagnostic pop
#endif

// NOLINTNEXTLINE(misc-unused-alias-decls): Waiting for C++20
namespace std_fmt = ::fmt;
